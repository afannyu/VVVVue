"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[989],{5331:function(s,e,n){n.d(e,{Z:function(){return d},S:function(){return i}});var a=n(6252),t=n(3577);const o={class:"toast"};function r(s,e,n,r,l,u){return(0,a.wg)(),(0,a.iD)("div",o,(0,t.zw)(n.message),1)}var l=n(2262),u={name:"ToastView",props:["message"]};const i=()=>{const s=(0,l.qj)({show:!1,toastMsg:""}),{show:e,toastMsg:n}=(0,l.BK)(s),a=e=>{s.show=!0,s.toastMsg=e,setTimeout((()=>{s.show=!1,s.toastMsg=""}),1500)};return{show:e,toastMsg:n,showToast:a}};var p=n(3744);const c=(0,p.Z)(u,[["render",r],["__scopeId","data-v-0628063c"]]);var d=c},4989:function(s,e,n){n.r(e),n.d(e,{default:function(){return k}});var a=n(6252),t=n(9963);const o=s=>((0,a.dD)("data-v-90083f1c"),s=s(),(0,a.Cn)(),s),r={class:"wrapper"},l=o((()=>(0,a._)("img",{src:"http://www.dell-lee.com/imgs/vue3/user.png",alt:""},null,-1))),u={class:"wrapper__input"},i={class:"wrapper__input"};function p(s,e,n,o,p,c){const d=(0,a.up)("Toast");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[l,(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{type:"text",class:"wrapper__input__content",placeholder:"请输入用户名","onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s)},null,512),[[t.nr,o.username]])]),(0,a._)("div",i,[(0,a.wy)((0,a._)("input",{type:"password",class:"wrapper__input__content",placeholder:"请输入密码","onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s)},null,512),[[t.nr,o.password]])]),(0,a._)("div",{onClick:e[2]||(e[2]=(...s)=>o.handleLogin&&o.handleLogin(...s)),class:"wrapper__login-button"},"登录"),(0,a._)("div",{onClick:e[3]||(e[3]=(...s)=>o.handelRegister&&o.handelRegister(...s)),class:"wrapper__login-link"},"注册")]),o.show?((0,a.wg)(),(0,a.j4)(d,{key:0,message:o.toastMsg},null,8,["message"])):(0,a.kq)("",!0)],64)}var c=n(2201),d=n(2262),w=n(5331),g=n(4471);const h=s=>{const e=(0,c.tv)(),n=(0,d.qj)({username:"",password:""}),{username:a,password:t}=(0,d.BK)(n),o=async()=>{try{const a=await(0,g.v)("/api/user/login",{username:n.username,password:n.password});console.log(a),0===a?.Error?(localStorage.isLogin=!0,e.push({name:"Home"})):s("登录失败")}catch(a){s("请求失败")}};return{handleLogin:o,username:a,password:t}},_=()=>{const s=(0,c.tv)(),e=()=>{s.push({name:"Register"})};return{handelRegister:e}};var m={name:"LoginView",setup(){const{show:s,toastMsg:e,showToast:n}=(0,w.S)(),{handleLogin:a,username:t,password:o}=h(n),{handelRegister:r}=_();return{handleLogin:a,handelRegister:r,username:t,password:o,show:s,toastMsg:e,showToast:n}},components:{Toast:w.Z}},v=n(3744);const f=(0,v.Z)(m,[["render",p],["__scopeId","data-v-90083f1c"]]);var k=f}}]);
//# sourceMappingURL=989.48dd4da3.js.map