"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[276],{3229:function(t,a,c){c.d(a,{E:function(){return s}});var e=c(3907),n=c(6252);const s=t=>{const a=(0,e.oR)(),c=a.state.cartList,s=(t,c,e,n)=>{a.commit("changeCartItem",{shopId:t,productId:c,productInfo:e,num:n})},r=(0,n.Fl)((()=>{const a=c[t]?.productList||[];return a})),o=(0,n.Fl)((()=>{const a=c[t].shopName||"";return a})),i=(0,n.Fl)((()=>{const a=c[t]?.productList;let e={all:0,price:0,allCartProducts:!0};if(a)for(let t in a){const c=a[t];e.all+=c.count,c.check&&(e.price+=c.count*c.price),!c.check&&c.count>0&&(e.allCartProducts=!1)}return e.price=e.price.toFixed(2),e}));return{changeCartItem:s,cartList:c,productList:r,shopName:o,caculations:i}}},8215:function(t,a,c){c.d(a,{e:function(){return n}});var e=c(2201);const n=()=>{const t=(0,e.tv)(),a=()=>{t.back()};return{handleClickBack:a}}},2023:function(t,a,c){c.d(a,{Z:function(){return g}});var e=c(6252),n=c(3577);const s={class:"shop"},r=["src"],o={class:"shop__content__title"},i={class:"shop__content__tags"},l={class:"shop__content__tag"},d={class:"shop__content__tag"},_={class:"shop__content__tag"},u={class:"shop__content__highlight"};function p(t,a,c,p,h,m){return(0,e.wg)(),(0,e.iD)("div",s,[(0,e._)("img",{src:c.item.imgUrl,alt:""},null,8,r),(0,e._)("div",{class:(0,n.C_)({shop__content:!0,"shop__content--bordered":!c.hideBorder})},[(0,e._)("div",o,(0,n.zw)(c.item.name),1),(0,e._)("div",i,[(0,e._)("span",l,"月售"+(0,n.zw)(c.item.sales),1),(0,e._)("span",d,"起送￥"+(0,n.zw)(c.item.expressLimit),1),(0,e._)("span",_,"基础运费￥"+(0,n.zw)(c.item.expressPrice),1)]),(0,e._)("p",u,(0,n.zw)(c.item.slogan),1)],2)])}var h={name:"ShopInfoView",props:["item","hideBorder"]},m=c(3744);const C=(0,m.Z)(h,[["render",p],["__scopeId","data-v-33620f52"]]);var g=C},5276:function(t,a,c){c.r(a),c.d(a,{default:function(){return kt}});var e=c(6252),n=c(9963);const s=t=>((0,e.dD)("data-v-a3e2de9a"),t=t(),(0,e.Cn)(),t),r={class:"wrapper"},o={class:"search"},i=s((()=>(0,e._)("div",{class:"search__content"},[(0,e._)("span",{class:"iconfont"},""),(0,e._)("input",{type:"text",placeholder:"请输入商品名称搜索"})],-1)));function l(t,a,c,s,l,d){const _=(0,e.up)("ShopInfo"),u=(0,e.up)("Content"),p=(0,e.up)("Cart");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",r,[(0,e._)("div",o,[(0,e._)("div",{onClick:a[0]||(a[0]=(...t)=>s.handleClickBack&&s.handleClickBack(...t)),class:"search__icon iconfont"},"  "),i]),(0,e.wy)((0,e.Wm)(_,{item:s.item,hideBorder:!0},null,8,["item"]),[[n.F8,s.item.imgUrl]])]),(0,e.Wm)(u,{shopName:s.item.name},null,8,["shopName"]),(0,e.Wm)(p)],64)}var d=c(2023),_=c(3577);const u=t=>((0,e.dD)("data-v-a1fa8662"),t=t(),(0,e.Cn)(),t),p={class:"cart"},h={class:"product"},m={class:"product__header"},C={class:"product__header__alll"},g=["innerHTML"],v=u((()=>(0,e._)("span",{class:"product__header__all"},"全选",-1))),k={key:0,class:"product__item"},w=["innerHTML","onClick"],I=["src"],L={class:"product__item__text"},f={class:"price"},b={class:"yen"},y={class:"origin"},P={class:"number"},z=["onClick"],D={class:"number__num"},S=["onClick"],H={class:"checkk"},T={class:"icon"},B={class:"icon__tag"},F={class:"check"},N=(0,e.Uk)(" 总计："),j={class:"car"};function U(t,a,c,s,r,o){const i=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.wy)((0,e._)("div",{class:"mask",onClick:a[0]||(a[0]=(...t)=>s.handleCartShow&&s.handleCartShow(...t))},null,512),[[n.F8,s.cartShow]]),(0,e._)("div",p,[(0,e.wy)((0,e._)("div",h,[(0,e.wy)((0,e._)("div",m,[(0,e._)("div",C,[(0,e._)("span",{onClick:a[1]||(a[1]=()=>s.allCheckProducts(s.shopId)),innerHTML:s.caculations.allCartProducts?"":"",class:"product__header__allIcon iconfont"},null,8,g),v]),(0,e._)("div",{onClick:a[2]||(a[2]=()=>s.clearCartProducts(s.shopId)),class:"product__header__clear"},"清空购物车")],512),[[n.F8,s.caculations.all>0]]),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(s.productList,(t=>((0,e.wg)(),(0,e.iD)(e.HY,{key:t._id},[t.count>0?((0,e.wg)(),(0,e.iD)("div",k,[(0,e._)("div",{class:"product__item__icon iconfont",innerHTML:t.check?"":"",onClick:()=>s.changeCartItemChecked(s.shopId,t._id)},null,8,w),(0,e._)("img",{src:t.imgUrl,alt:""},null,8,I),(0,e._)("div",L,[(0,e._)("h4",null,(0,_.zw)(t.name),1),(0,e._)("div",f,[(0,e._)("span",b,"￥"+(0,_.zw)(t.price),1),(0,e._)("span",y,"￥"+(0,_.zw)(t.oldPrice),1)]),(0,e._)("div",P,[(0,e._)("div",{class:"number__minus",onClick:()=>{s.changeCartItem(s.shopId,t._id,t,-1)}},"-",8,z),(0,e._)("div",D,(0,_.zw)(t.count||0),1),(0,e._)("div",{class:"number__plus",onClick:()=>{s.changeCartItem(s.shopId,t._id,t,1)}},"+",8,S)])])])):(0,e.kq)("",!0)],64)))),128))],512),[[n.F8,s.cartShow]]),(0,e._)("div",H,[(0,e._)("div",T,[(0,e._)("img",{onClick:a[3]||(a[3]=(...t)=>s.handleCartShow&&s.handleCartShow(...t)),src:"http://www.dell-lee.com/imgs/vue3/basket.png",alt:""}),(0,e._)("div",B,(0,_.zw)(s.caculations.all),1)]),(0,e._)("div",F,[N,(0,e._)("span",null,"￥"+(0,_.zw)(s.caculations.price),1)]),(0,e.Wm)(i,{to:{path:`/order/${s.shopId}`}},{default:(0,e.w5)((()=>[(0,e.wy)((0,e._)("div",j,"去结算",512),[[n.F8,s.caculations.all>0]])])),_:1},8,["to"])])])],64)}var Z=c(2262),x=c(2201),Y=c(3907),K=c(3229);const M=t=>{const{changeCartItem:a,productList:c,caculations:e}=(0,K.E)(t),n=(0,Y.oR)(),s=n.state.cartList,r=(t,a)=>{n.commit("changeCartItemChecked",{shopId:t,productId:a})},o=t=>{n.commit("clearCartProducts",{shopId:t})},i=t=>{n.commit("allCheckProducts",{shopId:t})};return{productList:c,clearCartProducts:o,changeCartItem:a,changeCartItemChecked:r,caculations:e,cartList:s,allCheckProducts:i}};var V={name:"CartView",setup(){const t=(0,x.yj)(),a=t.params.id,c=(0,Z.iH)(!1),e=()=>{c.value=!c.value},{productList:n,clearCartProducts:s,changeCartItem:r,changeCartItemChecked:o,caculations:i,cartList:l,allCheckProducts:d}=M(a);return{productList:n,shopId:a,clearCartProducts:s,changeCartItem:r,changeCartItemChecked:o,caculations:i,cartList:l,allCheckProducts:d,handleCartShow:e,cartShow:c}}},W=c(3744);const q=(0,W.Z)(V,[["render",U],["__scopeId","data-v-a1fa8662"]]);var E=q,$=c(4471);const R={class:"content"},A={class:"category"},G=["onClick"],J={class:"product"},O=["src"],Q={class:"product__item__text"},X={class:"price"},tt={class:"yen"},at={class:"origin"},ct={class:"number"},et=["onClick"],nt={class:"number__num"},st=["onClick"];function rt(t,a,c,n,s,r){return(0,e.wg)(),(0,e.iD)("div",R,[(0,e._)("div",A,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.categoryList,((t,a)=>((0,e.wg)(),(0,e.iD)("div",{key:a,class:(0,_.C_)({category__item:!0,"category__item--active":n.currentTab===t.tab}),onClick:()=>n.handleTabClick(t.tab)},(0,_.zw)(t.name),11,G)))),128))]),(0,e._)("div",J,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.productList,(t=>((0,e.wg)(),(0,e.iD)("div",{key:t._id,class:"product__item"},[(0,e._)("img",{src:t.imgUrl,alt:""},null,8,O),(0,e._)("div",Q,[(0,e._)("h4",null,(0,_.zw)(t.name),1),(0,e._)("p",null,"月售"+(0,_.zw)(t.sales)+"件",1),(0,e._)("div",X,[(0,e._)("span",tt,"￥"+(0,_.zw)(t.price),1),(0,e._)("span",at,"￥"+(0,_.zw)(t.oldPrice),1)]),(0,e._)("div",ct,[(0,e._)("div",{class:"number__minus",onClick:()=>{n.changeCart(n.shopId,t._id,t,-1,c.shopName)}},"-",8,et),(0,e._)("div",nt,(0,_.zw)(n.getCartProductData(n.shopId,t._id)),1),(0,e._)("div",{class:"number__plus",onClick:()=>{n.changeCart(n.shopId,t._id,t,1,c.shopName)}},"+",8,st)])])])))),128))])])}var ot=c(4239);const it=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}],lt=()=>{const t=(0,Z.iH)(it[0].tab),a=a=>{t.value=a};return{currentTab:t,handleTabClick:a}},dt=(t,a)=>{const c=(0,Z.qj)({productList:[]}),n=async()=>{const e=await(0,$.U)(`/api/shop/${a}/products`,{tab:t.value});0===e?.errno&&e?.data?.length&&(c.productList=e.data)};(0,e.m0)((()=>{n()}));const{productList:s}=(0,Z.BK)(c);return{productList:s}},_t=()=>{const{cartList:t,changeCartItem:a}=(0,K.E)(),c=(t,a)=>{ot.Z.commit("changeShopName",{shopId:t,shopName:a})},e=(t,e,n,s,r)=>{a(t,e,n,s),c(t,r)},n=(a,c)=>t?.[a]?.productList?.[c]?.count||0;return{changeCart:e,cartList:t,getCartProductData:n}};var ut={name:"ContentView",props:["shopName"],setup(){const t=(0,x.yj)(),a=t.params.id,{currentTab:c,handleTabClick:e}=lt(),{productList:n}=dt(c,a),{changeCart:s,cartList:r,getCartProductData:o}=_t();return{productList:n,categoryList:it,getCartProductData:o,currentTab:c,handleTabClick:e,cartList:r,shopId:a,changeCart:s}}};const pt=(0,W.Z)(ut,[["render",rt],["__scopeId","data-v-4a174d31"]]);var ht=pt,mt=c(8215);const Ct=()=>{const t=(0,x.yj)(),a=(0,Z.qj)({item:{}}),c=async()=>{const c=await(0,$.U)(`/api/shop/${t.params.id}`);0===c?.errno&&c?.data&&(a.item=c.data[""+(t.params.id-1)]),console.log(c)},{item:e}=(0,Z.BK)(a);return{getItem:c,item:e}};var gt={name:"ShopView",components:{ShopInfo:d.Z,Content:ht,Cart:E},setup(){const{getItem:t,item:a}=Ct(),{handleClickBack:c}=(0,mt.e)();return t(),{item:a,getItem:t,handleClickBack:c}}};const vt=(0,W.Z)(gt,[["render",l],["__scopeId","data-v-a3e2de9a"]]);var kt=vt}}]);
//# sourceMappingURL=276.61aff366.js.map